@{
	ViewData["Title"] = "角色管理";
	Layout = "~/Areas/Admin/Views/Shared/_LayuiLayout.cshtml";
}

<div class="layui-fluid">
 <div class="layui-card">

  <div style="padding-bottom: 10px;">
   <button class="layui-btn layuiadmin-btn-event" data-type="query">查询</button>
   <button class="layui-btn layuiadmin-btn-event layui-btn-danger" data-type="delete">删除</button>
   <button class="layui-btn layuiadmin-btn-event" data-type="add">添加</button>
  </div>

  <table class="layui-table" id="dataTable" lay-filter="dataTable"></table>

  <script type="text/html" id="switchIsValid">
   <input type="checkbox" name="isValid" value="{{d.isValid}}" lay-skin="switch" lay-text="是|否" lay-filter="isValid" {{ d.isValid == true ? 'checked' : '' }}>
  </script>

  <script type="text/html" id="table-action">
   <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i class="layui-icon layui-icon-edit"></i>编辑</a>
   <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i class="layui-icon layui-icon-delete"></i>删除</a>
  </script>

 </div>
</div>




@section scripts{
<script>
	layui.use(['jquery', 'table'], function () {
		let $ = layui.jquery,
		 table = layui.table;

		 // 字段配置
		const tableCols = [[
			{ type: 'checkbox', fixed: 'left' },
			{ field: 'roleId', title: '权限名称' },
			{ field: 'roleName', title: '权限类型' },
			{ field: 'roleDescription', title: '权限动作' },
			{ field: 'isValid', title: '是否有效', templet: '#switchIsValid' },
			{ title: '操作', width: 150, align: 'center', fixed: 'right', toolbar: '#table-action' }
		]];

		 table.render({
			  elem: '#dataTable',
			  title: '角色数据表',
			  totalRow: true,
			  height:'full-200',
			  cellMinWidth: 80
			  cols: tableCols,
			  loading:false,
			  page: true
		});
		table.reload('table-permission', {
			 url: TableURL,
			 method:"get",
			 request: {
				 pageName: 'PageIndex', //页码的参数名称，默认：page
				 limitName: 'PageSize' //每页数据量的参数名，默认：limit
			},
			 where: {
				RoleId: selectArr,
				RoleName:"",
				IsValid:null,
				StartTime:null,
				EndTime:null,
			 }
		});
	})
</script>
}


